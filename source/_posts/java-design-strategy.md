---
title: Java 设计模式——策略模式(Strategy)
date: 2017-10-22 18:36:18
tags:
---
策略模式是指**对一系列的算法定义，并将每一个算法封装起来，而且使它们还可以相互替换。策略模式让算法独立于使用它的客户而独立变化**

在《Head First 设计模式》中提到一个很有趣的案例：要实现鸭子飞翔的功能，joe 最初的想法是将所有鸭子继承自 Duck 类

这时问题出现了，原本不应该飞的鸭子也能飞翔，如果需要修改代码，可以在具体某个不能飞翔的鸭子子类将飞翔的方法覆盖，并且什么都不做

这个解决办法不够优雅，要是再来几个子类有不同的特性，按照这样的方法解决将来会出大问题

为了解决这个问题，我们会用到**第一个设计原则：封装变化。即找出应用中可能需要变化之处，把它们独立出来，不要和那些不需要变化的代码混在一起**

也就是说，如果有新的需求来，会使某个方面的代码发生变化，这样我们就可以确定哪些代码需要抽离开来，分开变化和不变化的部分，以便下次需求再来就可以轻易的改动或增加代码却不需要修改其他部分

这个设计原则也是所有设计模式的精髓所在，它们都离不开这个原则

回到前面的问题，我们如何设计飞行的鸭子呢？

这时就出现了**第二个设计原则：针对接口编程，而不是很对实现编程**

这里所说的针对接口编程是在利用多态，是针对超类编程

在鸭子的案例中就出现了 FlyBehavior 和 QuackBehavior 接口，让其中可飞行的行为FlyWithWings 实现 FlyBehavior 

我们将鸭子飞行抽象成接口，让能够飞行的鸭子去实现，而不是使用继承，这样做的好处是如果以后来了一个鸭子呱呱叫的行为，可以将这两个类组合起来

所以**第三个设计原则也出现了：优先使用组合，而不是继承**

在环境角色类中持有这两种行为接口的引用，在需要调用的地方直接调用，而不用关心具体的实现
