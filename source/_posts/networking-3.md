---
title: 计算机网络-网络层（一）
date: 2018-05-13 21:51:07
tags:
---

博客快一个月没写了，今天继续努力。eos大跌，昨晚15美元上车，记录一下，一年后万一发达了呢？ --stackfing

## 网络层提供的两种服务

网络层提供了两种服务
1、虚电路服务
2、数据报服务

**虚电路服务**是面向连接的。它需要在两端通信之前先建立连接，分组的首部就不需要填写完整的目的主机的地址就可以直接通信。电话服务就是面向连接的：在通信之前由电信网负责把两端进行通信的线路预留出来，在通信时将信息可靠的传输给接收端。面向连接服务需要付出昂贵的资金购买各种设备。

电话服务是非智能的，没有差错处理能力，而数据报服务是只能的，有很强的差错处理能力。

**数据报服务**是面向无连接的。在互联网先驱设计的时候就提出来这种思路，互联网发展到今天的规模，证明了他们设计思路的正确性。网络层向上层只提供简单灵活的、无连接的、尽最大努力交付的数据报服务。数据报就是我们之前提到的**分组**。成本降低了，运用方式灵活，这是数据报服务的最大优点。

数据报服务里的分组可以独立选择路由。也就是说各种分组到达目的主机的路径可以是不一致的，容易出现在某个路由传送过程中丢失分组，所以数据报服务只是尽最大努力交付。

## 虚拟互联网络

在世界上需要把不同网络互相连接起来并且能够通信，会遇到很多问题。比如：不同的服务（面向连接服务和面向无连接服务）如何连接起来进行通信？

在不同设备直接连接起来需要一些中间设备：

1、物理层使用的中间设备：转发器
2、数据链路层使用的中间设备：网桥或桥接器
3、网络层使用的中间设备：路由器
4、网络层上层使用的中间设备：网关

通过这些中间设备连接起来组成的网络叫做虚拟互联网络。

这些连接在虚拟互联网络上的主机使用 IP 协议。这样可以屏蔽各种处于不同网络的主机通信方式不同展现的差异，可以让这些主机就好像在与单个网络上通信一样。

主机 A 需要与主机 B 通信，A 主机需要查找自己的路由表，看 B 主机是否在同一个网络上，如果在的话，不同经过任何路由，直接交付。如果不在同一个网络，将分组数据发送给某个路由器，那个路由器再进行前面的动作，一直到目的主机所在的网络。

## 分类的 IP 地址

IP 地址经历了三个历史阶段：
1、分类的 IP 地址
2、子网划分
3、构成超网

这几个阶段的产生原因都是因为  IPv4 地址不够人们使用而产生的。

IP 地址划分为若干个固定类，每一类地址都由两个固定长度字段组成，第一个字段是**网络号**，标志主机所连接的网络。第二个字段是**主机号**标志主机（或者路由器）。IP 地址在整个互联网范围内是唯一的。

A类IP：从0.0.0.0 – 127.255.255.255，共有16777216个IP
B类IP：从128.0.0.0 – 191.255.255.255，共有65536个IP
C类IP：从192.0.0.0 – 223.255.255.255，共有256个IP
D类IP：从224.0.0.0 – 239.255.255.255
E类IP：从2240.0.0.0 – 255.255.255.255

![分类的 IP 地址](https://upload-images.jianshu.io/upload_images/4438070-0449c2085b4845b9.jpeg?imageMogr2/auto-orient/strip%7CimageView2/2/w/1240)

## IP 地址与硬件地址

MAC 地址也就是所谓的硬件地址，在全球是唯一的，硬件地址是物理层和数据链路层使用的物理地址。而 IP 地址是逻辑地址（使用软件实现的）。

在数据从高层下到低层， IP 地址交给了数据链路层就会被封装为 MAC 帧。MAC 帧在传送的时候使用的源地址和目的地址都是硬件地址。


